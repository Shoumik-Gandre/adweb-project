{% extends 'adtool/base.html' %}
{% load static %}
{% block content %}
    <form method="post" class="form-inline" name="action" value="table-form">
        {% csrf_token %}
        <div class="form-group mb-2">
            <label for="websiteurl">Website Url</label>
            <input id="websiteurl" type="url" class="form-control mx-sm-3 mb-2" placeholder="enter website url" name="website-url" pattern="https://.*" required/>
            <button type="submit" class="btn btn-primary mr-sm-3 mb-2" name="btn" value="add">Add</button>
            <button type="submit" class="btn btn-danger mb-2" name="btn" value="delete">Delete All instances</button>
        </div>
        
    </form>

    <table class="table table-hover">
        <thead class="thead-dark">
        <tr>
            <th scope="col">#</th>
            <th scope="col">Website</th>
            <th scope="col">Key</th>
            <th scope="col">action</th>
        </tr>
        </thead>
        <tbody>
            {% if websites %}
            {% for website in websites %}
                <tr id="tr-{{ website.userkey }}">
                    <td scope="row">{{ forloop.counter }}</td>
                    <td>{{ website.url }}</td>
                    <td id="td-{{ website.userkey }}">{{ website.userkey }}</td>
                    <td>
                        <button class="btn btn-sm btn-secondary" id="change-button-{{ website.userkey }}" onclick="changeKey(this.id)">Change Key</button>
                        <button class="btn btn-sm btn-danger" id="delete-button-{{ website.userkey }}" onclick="deleteKey(this.id)">Delete Key</button>
                    </td>
                </tr>
            {% endfor %}
            {% endif %}
        </tbody>
    </table>
{% endblock content %}

{% block javascript %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script src="{% static 'adtool/js/home/keyManipulation.js' %}"></script>
{% endblock javascript %}